# :dizzy:基于Python OpenCV的图像算法研究

本项目旨在帮助您深入了解图像处理的各种算法，并使用 Python OpenCV 库实现这些算法。您可以在 main.py 文件中找到 60 多种图像处理算法的详细说明，并且各个函数功能高度解耦，可以单独运行。

本项目旨在通过使用Python OpenCV，研究图像处理的各种算法，包括但不限于：

- [x] 平移变换：平移变换是图像处理中最常见的一种变换方法，它将图像在水平和垂直方向上平移一定的距离。
- [x] 尺度变换：尺寸变换是指对图像的尺寸进行调整，包括放大和缩小两种情况。
- [x] 旋转变换：旋转变换是指对图像进行旋转，使图像以任意角度旋转。
- [x] 仿射变换：放射变换是图像处理中的另一种常见变换方法，它使图像在水平和垂直方向上的尺寸和形状发生变化。
- 灰度映射：灰度映射是图像处理中的一种常用方法，它把原图的灰度值映射到新的灰度值。
  - [x] 求反：这是一种常用的灰度映射方法，它对原图的每个像素点的灰度值进行反转，得到一个黑白颠倒的图像。
  - [x] 动态范围压缩：通过将原图的灰度值映射到一个更小的灰度值范围，可以压缩图像的动态范围，使图像的细节更加清晰。
  - [x] 阶梯量化：这是一种特殊的灰度映射方法，它把原图的灰度值划分为若干个阶梯，每个阶梯对应一个灰度值，最后得到一张量化后的图像。
  - [x] 阈值分割：这是一种常用的图像分割方法，它通过设定一个阈值，把原图像分成黑白两部分，以实现图像的二值化处理。
- 图像的算术运算：图像的算术运算是图像处理中常用的一种方法，其目的是利用数学运算来改变图像的亮度、对比度等特征。
  - [x] 加法：将两张图像对应的像素值相加，得到新的图像，其亮度会随着图像像素值的增加而增加。
  - [x] 平均法消除噪声：通过将多张图像的像素值求平均得到新的图像，用来消除图像中的随机噪声。
  - [x] 减法：将两张图像对应的像素值相减，得到新的图像，其亮度会随着图像像素值的减少而减少。
- 直方图修正：主要用于改善图像质量和增强图像的可见性。它可以用于解决图像亮度和对比度不一致、图像灰度分布不均衡等问题，从而提高图像质量。
  - [x] 直方图均衡化是一种图像增强技术，它通过重新分配图像灰度级的像素值来改善图像的对比度和亮度。该方法通过创建一个新的灰度映射表，从而将图像的灰度值转换到全新的灰度级上。
  - [x] 直方图规定化是另一种图像处理技术，它用于规定图像的灰度分布，使得它更加符合预期。该方法通过计算一个新的灰度映射表，将图像的灰度值映射到一个特定的灰度分布上。
- 空域滤波
  - [x] 线性平滑滤波器：通过与图像上相邻像素的加权平均值相关的方法，将图像中的噪声去除。线性平滑滤波器包括均值滤波器、中值滤波器和加权平均滤波器。
  - [x] 线性锐化滤波器：通过对图像中的边缘进行检测和强化来提高图像的对比度。常用的线性锐化滤波器有拉普拉斯算子和Sobel算子。
  - [x] 非线性平滑滤波器：通过基于图像上单个像素的非线性函数来平滑图像。常用的非线性平滑滤波器有高斯滤波器和中值滤波器。
  - [x] 非线性锐化滤波器：通过非线性函数，对图像中的像素进行锐化。常用的非线性锐化滤波器有Canny边缘检测算法。
- 傅里叶变换和反变换
  - [x] 傅里叶变换是一种将时域图像转换到频域图像的技术，它可以将图像中的空间信息转换为频率信息。傅里叶变换的输出是一个复数图像，包含了图像的频域信息。
  - [x] 反傅里叶变换则是将频域图像转换回时域图像的过程。傅里叶变换和反变换是相互对称的，可以用来进行图像的频域处理，如图像去噪、图像增强、图像锐化等。
- 高通和低通滤波器（分别考虑:理想滤波器、巴特沃斯滤波器，指数滤波器）
  - [x] 高通滤波器主要作用是通过通过去除图像中的低频信息，来增强图像中的高频信息，从而达到锐化图像、增强图像边缘、突出细节等效果。
  - [x] 低通滤波器主要作用是通过通过去除图像中的高频信息，来保留图像中的低频信息，从而达到平滑图像、消除噪声等效果。
  - [x] 理想滤波器是指对图像的频谱进行简单的削减或保留，进而影响图像的频谱特征，从而影响图像的锐度或平滑性。
  - [x] 巴特沃斯滤波器是一种常用的低通滤波器，它的滤波效果是通过拟合函数的方式实现的。
  - [x] 指数滤波器是一种利用指数函数的形式实现的低通滤波器，它在图像平滑性上具有较好的效果。
- 特殊高通滤波器（高频增强滤波器、高频提升滤波器）
  - [x] 高频增强滤波器用于提升图像的高频部分，以使高频图像特征更加突出。它通常通过选择一个掩模和卷积操作来实现，其中掩模用于提取高频部分并对其进行增强。
  - [x] 高频提升滤波器与高频增强滤波器类似，但是它更强调对高频图像信号进行提升。该过滤器通常使用掩模或频域技术来增加图像中的高频内容。
- [x] 带通带阻滤波器：带通带阻滤波器是图像处理中的一种频域滤波器，它既可以保留图像的某些特定频率段，也可以抑制图像的某些特定频率段。带通带阻滤波器在图像处理中被广泛应用，比如去除噪声、图像增强等。带通带阻滤波器的原理是利用频率域的低通、高通滤波器的性质，在特定频率范围内保留图像的有用信息，在其他频率范围内抑制图像的噪声。这种滤波器一般由低通滤波器和高通滤波器的组合形式组成，滤波器的系数决定了哪些频率段被保留，哪些频率段被抑制。
- [x] 同态滤波器：同态滤波（ Homomorphic Filtering）是图像处理中的一种技术，它允许在图像的数学变换（例如灰度变换）的基础上进行滤波。同态滤波器可以在图像的频域上进行滤波，这意味着将图像转换为频域，对其进行修改，然后再转换回空域。该技术的主要应用在图像增强和图像去噪中。同态滤波器可以消除图像的低频信息（例如光照影响），以提高图像中的高频信息，从而使图像更清晰。这是在诸如病理学图像，工业检测图像和生物医学图像等领域中非常有用的。
- [x] 空域噪声滤波器：空域噪声滤波器是图像处理中的一种方法，用于对图像中的噪声进行消除或减弱。空域滤波器以图像像素值为中心，通过计算周围像素值来改变中心像素值，从而消除噪声或减弱其强度。例如，均值滤波器将图像中心像素值替换为周围像素值的平均值，从而使图像更加平滑。空域滤波器通常应用于去除图像中的高斯噪声、椒盐噪声等。
- [x] 组合滤波器：组合滤波器是一种用于图像处理的滤波器。它通过将多个不同类型的滤波器结合在一起来获得图像的最终处理效果。例如，在一些情况下，组合滤波器可以结合带通带阻滤波器和空域噪声滤波器，以有效地去除图像中的椒盐噪声。在组合滤波器中，不同类型的滤波器会被结合在一起，以满足特定的图像处理需求。在使用组合滤波器时，需要经过精心的参数设置，以保证最终的图像效果是期望的。如果参数设置不当，可能会导致图像变得模糊不清或更加噪声。
- [x] 无约束滤波器
- [x] 位平面编码
- [x] DPCM编码
- [x] 余弦变换编码
- [x] 小波变换编码
- [x] 动态规划
- [x] 单阈值分割
- [x] SUSAN边缘检测
- [x] 主动轮廓
- [x] 分水岭分割
- [x] 二值形态学（腐蚀、膨胀…）
...

## :rocket:研究背景

图像处理是计算机视觉和图像识别领域中非常重要的研究方向。随着深度学习算法的发展，图像处理技术在很多领域得到了广泛的应用，Python OpenCV 是一个开源的图像处理库，提供了大量的图像处理算法，是图像处理领域中的重要工具。

本项目旨在利用 Python OpenCV 库，研究多种图像处理算法的原理和实现方法，并实现了一个图像处理工具集。通过对图像处理算法的研究，不仅提高了我们的技术水平，也为以后的图像处理项目提供了重要的基础。

## :wrench:实验环境

- Python 3.7
- OpenCV 4.4.0
- Numpy

## 🤖运行示例

⚡运行本项目代码前请执行以下命令安装所依赖的库

```shell
pip install opencv-python
pip install numpy
pip install Pillow
```

Python 代码如下（直接运行）：

```python
import tkinter as tk
from tkinter import filedialog
import cv2
import numpy as np
import os
from PIL import Image, ImageTk
import os

# 检查文件夹是否存在，如果不存在则创建一个文件夹
if not os.path.exists('result'):
    os.makedirs('result')

def select_image():
    """
    点击选择图片按钮时调用的函数，用于选择图像并显示在窗口中
    """
    global image_path
    # 使用filedialog模块弹出选择文件对话框，获取选择的图像路径
    image_path = filedialog.askopenfilename()
    # 使用OpenCV读取图像
    img = cv2.imread(image_path)
    # 将OpenCV读取的BGR图像转换为RGB图像
    img = cv2.cvtColor(img, cv2.COLOR_BGR2RGB)
    # 将图像转换为PIL图像
    img = Image.fromarray(img)
    # 将PIL图像转换为可以在Tkinter窗口中显示的图像
    img = ImageTk.PhotoImage(img)
    # 使用config()函数更新显示图像的标签的图像
    input_label.config(image=img)
    # 将图像存储在input_label变量中，以防图像被GC回收
    input_label.image = img

def process_image():
    # 声明全局变量 output_img
    global output_img
    # 使用 cv2.imread 读取图片
    img = cv2.imread(image_path)
    # 调用 translate_image 函数进行平移变换
    output_img = translate_image(img)
    # 将 BGR 格式图片转换为 RGB 格式
    output_img = cv2.cvtColor(output_img, cv2.COLOR_BGR2RGB)
    # 将 numpy 数组格式图片转换为 Image 对象
    output_img = Image.fromarray(output_img)
    # 将 Image 对象转换为 Tkinter 可用的 PhotoImage 对象
    output_img = ImageTk.PhotoImage(output_img)
    # 配置输出图片的 Label 组件，将处理后的图片显示在该组件上
    output_label.config(image=output_img)
    # 更新 output_label.image 属性的值
    output_label.image = output_img
    # 使用 cv2.imwrite 函数将处理后的图片保存到 result 文件夹中
    cv2.imwrite("result/result.jpg", output_img)


def translate_image(img):
    # 获取图像的行数和列数
    rows, cols = img.shape[:2]
    # 创建一个移动矩阵
    M = np.float32([[1,0,100],[0,1,50]])
    # 应用仿射变换到图像上
    output_img = cv2.warpAffine(img, M, (cols, rows))
    # 返回处理后的图像
    return output_img


# 创建窗口
root = tk.Tk()
# 设置窗口标题
root.title("图像处理器")

# 创建输入图像标签
input_label = tk.Label(root)
# 将标签放置在左侧
input_label.pack(side="left")

# 创建输出图像标签
output_label = tk.Label(root)
# 将标签放置在右侧
output_label.pack(side="right")

# 创建选择图像按钮
select_button = tk.Button(root, text="选择图像", command=select_image)
# 将按钮放置在窗口中
select_button.pack()

# 创建处理图像按钮
process_button = tk.Button(root, text="开始处理", command=process_image)
# 将按钮放置在窗口中
process_button.pack()

# 运行主循环
root.mainloop()
```

⚡ [main.py](https://github.com/kangvcar/kkimage/blob/master/main.py) 文件中项目中的各个功能模块包含详细的说明，各个函数功能高度解耦可独立运行，获取[完整版](https://mbd.pub/o/bread/YZqcm51r)60+种图像处理算法。

## 😘基础版

[下载基础版](https://github.com/kangvcar/kkimage/releases/download/v1.2.0/kkapp-base.exe)

- 每次支持处理一个图像
- 支持的4种算法包括：平移变换、尺度变换、旋转变换、仿射变换

## 🥰完整版

[获取完整版](https://mbd.pub/o/bread/YZqcm51r)后可获得如下服务：

- “图像处理工具集 - 完整版” 程序（Windows 版）
- “图像处理工具集 - 完整版” 程序（MacOS 版可联系作者制作）
- 完整版支持批处理，一次处理多张图像
- 完整版支持所有60+种图像处理算法
- 一键完成60+种不同的处理算法图像处理
- 可联系作者获取源代码文件

![gui](https://github.com/kangvcar/kkimage/blob/master/pics/app.gif?raw=true)

## :star2:实验结果

实验成果将会存放在该项目的**result**文件夹下，包括处理后图像的展示等。

## :clap:总结

在本项目中，我们使用Python OpenCV库，研究了多种图像处理算法，并实现了这些算法，得到了实验结果。本项目的实验结果可以作为未来研究的参考，并且可以用于更多的图像处理相关的研

## 算法列表

1. 图像的坐标变换，包括（图像进行平移变换、尺度变换、旋转变换、仿射变换）。
2. 空域增强处理，包括给定变化曲线的灰度映射（求反、动态范围压缩、阶梯量化、阈值分割）、图像的算术运算（加法、平均法消除噪声、减法）、直方图修正（直方图均衡化、直方图规定化）、空域滤波（线性平滑滤波器、线性锐化滤波器、非线性平滑滤波器、非线性锐化滤波器）。
3. 频域图像增强，包括图像的傅里叶变换和反变换（需要考虑图像旋转、平移时的变换）、高通和低通滤波器（分别考虑:理想滤波器、巴特沃斯滤波器，指数滤波器）、特殊高通滤波器（高频增强滤波器、高频提升滤波器）、带通带阻滤波器；同态滤波器。
4. 图像恢复，包括空域噪声滤波器（均值滤波器、排序统计滤波器），组合滤波器（包括混合滤波器、选择性滤波器）、无约束滤波器（逆滤波）、有约束滤波器（维纳滤波器）
5. 图像编码包括变长编码（哈夫曼编码、哥伦布编码、香农-法诺编码、算数编码）、位平面编码。
6. 图像编码技术和标准，包括预测编码（DPCM编码、余弦变换编码、小波变换编码）
7. 图像分割，包括动态规划、单阈值分割。
8. 典型分割，包括SUSAN边缘检测、主动轮廓、分水岭分割。
9. 数学形态学，包括二值形态学（腐蚀、膨胀、开启、闭合）、基于二值形态学应用(噪声消除、目标检测、区域填充)；灰度形态学（腐蚀、膨胀、开启、闭合）、基于灰度形态学的应用(形态梯度、形态平滑、高帽变换、低帽变换) 。
10. Sobel算子、Roberts算子、拉普拉斯算子、Canny算子、Prewitt算子、高斯拉普拉斯算子。
